{"version":3,"file":"webpack-plugin.js","sourceRoot":"","sources":["../../src/purify/webpack-plugin.ts"],"names":[],"mappings":";;AAAA,mCAAkC;AAGlC;IACE;IAAgB,CAAC;IAEV,4BAAK,GAAZ,UAAa,QAAa;QACxB,QAAQ,CAAC,MAAM,CAAC,aAAa,EAAE,UAAC,WAAgB;YAC9C,WAAW,CAAC,MAAM,CAAC,uBAAuB,EAAE,UAAC,MAAW,EAAE,QAAa;gBACrE,MAAM,CAAC,OAAO,CAAC,UAAC,KAAU;oBACxB,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,QAAgB,IAAK,OAAA,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,EAA/B,CAA+B,CAAC,CAAC,OAAO,CAAC,UAAC,QAAgB;wBACjG,IAAM,cAAc,GAAG,eAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;wBACrE,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,aAAa,GAAG,cAAc,CAAC;wBAC5D,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,cAAM,OAAA,cAAc,EAAd,CAAc,CAAC;oBACrE,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;gBACH,QAAQ,EAAE,CAAC;YACb,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IACH,mBAAC;AAAD,CAAC,AAjBD,IAiBC;AAjBY,oCAAY","sourcesContent":["import { purify } from './purify';\r\n\r\n\r\nexport class PurifyPlugin {\r\n  constructor() { }\r\n\r\n  public apply(compiler: any): void {\r\n    compiler.plugin('compilation', (compilation: any) => {\r\n      compilation.plugin('optimize-chunk-assets', (chunks: any, callback: any) => {\r\n        chunks.forEach((chunk: any) => {\r\n          chunk.files.filter((fileName: string) => fileName.endsWith('.bundle.js')).forEach((fileName: string) => {\r\n            const purifiedSource = purify(compilation.assets[fileName].source());\r\n            compilation.assets[fileName]._cachedSource = purifiedSource;\r\n            compilation.assets[fileName]._source.source = () => purifiedSource;\r\n          });\r\n        });\r\n        callback();\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n"]}